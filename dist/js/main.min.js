for(var btnNavOpen=document.querySelector(".navMobile__button"),nav=document.querySelector(".nav"),navElements=document.querySelectorAll(".nav__menu-element"),btnNavClose=document.querySelector(".navMobile__button__close"),projectsBox=document.querySelector(".projects__box"),reviewsMenuArrows=document.querySelectorAll(".reviewsMenu__arrow"),reviewsBox=document.querySelector(".reviewsBox"),rewiewsMenuElementsBox=document.querySelector(".reviewsMenu__elements"),formBtn=document.querySelectorAll(".contact-form__button")[0],formInputs=document.querySelectorAll(".contact-form__input"),formAlerts=document.querySelectorAll(".contact-form__alert"),formAccept=document.querySelector(".contact-infoBox"),formAcceptClose=document.querySelector(".contact-info__close"),faqElements=document.querySelectorAll(".faq-element"),faqButtons=document.querySelectorAll(".faq-element-box"),sectionTitle=document.querySelectorAll(".section_title"),project={id:["0","1"],name:["Kamieniarstwo","Weterynaria"],img:["dist/img/page1.png","dist/img/page2.png"],alt:["kamieniarstwo Jacek Spychalski","gabinet weterynaryjny pionavet"],link:["https://kamieniarstwospychalski.pl/","https://pionavet.pl/"]},review={id:["0","1","3","4"],name:["Basia","Adam","Kasia","Olek"],text:["Super!","Polecam!","Przykładowa opinia nr3, polecam serdecznie","Przykładowa opinia nr4, polecam serdecznie. Bardzo ladne strony"]},openNav=function(){nav.style.right=0},closeNav=function(){nav.style.right="-200px"},clickOutsideNav=(btnNavOpen.addEventListener("click",openNav),btnNavClose.addEventListener("click",closeNav),navElements.forEach(function(e){e.addEventListener("click",function(){window.innerWidth<=768&&setTimeout(function(){closeNav()},300)})}),function(e){e.target.classList.contains("nav__menu-element")||e.target.classList.contains("navMobile__button__close")||e.target.classList.contains("nav")||e.target.classList.contains("navMobile__button")||e.target.classList.contains("navMobile__button__close-element")||e.target.classList.contains("navMobile__button-element")||window.innerWidth<=768&&closeNav()}),createNewProject=function(e){var t=document.createElement("a"),n=(t.classList.add("project"),t.setAttribute("href",project.link[e]),t.setAttribute("target","_blank"),document.createElement("img")),s=(n.setAttribute("src",project.img[e]),n.setAttribute("alt",project.alt[e]),n.classList.add("project__img"),document.createElement("p")),e=(s.textContent=project.name[e],s.classList.add("project__title"),document.createElement("div")),i=(e.classList.add("project__btn"),document.createElement("i")),a=(i.classList.add("fa-solid"),i.classList.add("fa-arrow-right"),i.classList.add("project__btn-arrow"),document.createElement("div")),r=(a.classList.add("triangle__project-btn"),document.createElement("div"));r.classList.add("triangle__project-btn__2"),e.appendChild(i),e.appendChild(a),e.appendChild(r),t.appendChild(n),t.appendChild(s),t.appendChild(e),projectsBox.appendChild(t)},i=0;i<project.id.length;i++)createNewProject(i);for(var createNewReview=function(e){var t=document.createElement("article"),n=(t.classList.add("review"),document.createElement("div")),s=(n.classList.add("review__name-box"),document.createElement("p")),i=(s.classList.add("review__name"),s.textContent=review.name[e],document.createElement("div")),e=(i.classList.add("review__text"),i.textContent=review.text[e],document.createElement("div"));e.classList.add("reviewsMenu__element"),n.appendChild(s),t.appendChild(n),t.appendChild(i),reviewsBox.appendChild(t),rewiewsMenuElementsBox.appendChild(e)},reviewsMenu=function(e){var t=document.querySelectorAll(".reviewsMenu__element--active").length,n=document.querySelector(".review--active"),s=document.querySelector(".review--left"),i=document.querySelector(".review--right");if(n.classList.remove("review--active"),s.classList.remove("review--left"),i.classList.remove("review--right"),e.target.classList.contains("reviewsMenu__arrow"))0==Array.from(reviewsMenuArrows).indexOf(e.target)?(1==t?(reviewsMenuElements.forEach(function(e){e.classList.add("reviewsMenu__element--active")}),reviewsList[reviewsList.length-1].classList.add("review--active"),reviewsList[0].classList.add("review--right"),reviewsList[reviewsList.length-2]):(reviewsMenuElements[t-1].classList.remove("reviewsMenu__element--active"),reviewsList[t-2].classList.add("review--active"),reviewsList[t-1].classList.add("review--right"),2==t?reviewsList[reviewsList.length-1]:reviewsList[t-3])).classList.add("review--left"):(t==reviewsMenuElements.length?(reviewsMenuElements.forEach(function(e){e.classList.remove("reviewsMenu__element--active")}),reviewsMenuElements[0].classList.add("reviewsMenu__element--active"),reviewsList[0].classList.add("review--active"),reviewsList[reviewsList.length-1].classList.add("review--left"),reviewsList[1]):(reviewsMenuElements[t].classList.add("reviewsMenu__element--active"),reviewsList[t].classList.add("review--active"),reviewsList[t-1].classList.add("review--left"),t==reviewsMenuElements.length-1?reviewsList[0]:reviewsList[t+1])).classList.add("review--right");else{var a=Array.from(reviewsMenuElements).indexOf(e.target);if(t-1<a){for(var r=t;r<=a;r++)reviewsMenuElements[r].classList.add("reviewsMenu__element--active");reviewsList[a].classList.add("review--active"),reviewsList[a-1].classList.add("review--left"),(a==reviewsList.length-1?reviewsList[0]:reviewsList[a+1]).classList.add("review--right")}else if(a<t-1){for(var c=a+1;c<t;c++)reviewsMenuElements[c].classList.remove("reviewsMenu__element--active");reviewsList[a].classList.add("review--active"),reviewsList[a+1].classList.add("review--right"),(0==a?reviewsList[reviewsList.length-1]:reviewsList[a-1]).classList.add("review--left")}else n.classList.add("review--active"),s.classList.add("review--left"),i.classList.add("review--right")}},_i3=0;_i3<review.id.length;_i3++)createNewReview(_i3);var reviewsMenuElements=document.querySelectorAll(".reviewsMenu__element"),reviewsList=document.querySelectorAll(".review"),formCheck=(reviewsList[0].classList.add("review--active"),reviewsMenuElements[0].classList.add("reviewsMenu__element--active"),reviewsList[reviewsList.length-1].classList.add("review--left"),reviewsList[1].classList.add("review--right"),reviewsMenuArrows.forEach(function(e){e.addEventListener("click",reviewsMenu)}),reviewsMenuElements.forEach(function(e){e.addEventListener("click",reviewsMenu)}),function(e){var t=Array.from(formInputs).indexOf(e.target),n=e.target;e.target.addEventListener("keyup",function(){""==n.value?(formAlerts[t].textContent="Pole nie może być puste",n.classList.add("contact-form__input--error")):(formAlerts[t].textContent="",n.classList.remove("contact-form__input--error"),1==t&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value)?n.classList.remove("contact-form__input--error"):(formAlerts[t].textContent="Wpisz poprawny adres email",n.classList.add("contact-form__input--error")))),""==formInputs[0].value||""==formInputs[1].value||formInputs[1].classList.contains("contact-form__input--error")?formBtn.disabled=!0:formBtn.disabled=!1})}),openFAQ=(formInputs.forEach(function(e){e.addEventListener("click",formCheck)}),function(e){btnNumber=Array.from(faqButtons).indexOf(e.target),faqElements[btnNumber].classList.contains("faq-element--active")?faqElements[btnNumber].classList.remove("faq-element--active"):(faqElements.forEach(function(e){e.classList.remove("faq-element--active")}),faqElements[btnNumber].classList.add("faq-element--active")),setTimeout(function(){faqElements[btnNumber].scrollIntoView({behavior:"smooth",block:"nearest"})},300)}),footerDate=(faqElements.forEach(function(e){e.addEventListener("click",openFAQ)}),function(){var e=document.querySelector(".footer__data"),t=(new Date).getFullYear();e.textContent=t}),navStart=(document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".contact-form__message");e&&(e.style.height="80px",e.style.height=e.scrollHeight+"px",e.addEventListener("input",function(){this.style.height="80px",this.style.height=this.scrollHeight+"px"},!1)),"sukces"==new URLSearchParams(window.location.search).get("status")&&(formAccept.style.display="block",document.documentElement.style.overflowY="hidden",e=window.scrollY,formAccept.style.top="".concat(e,"px"),formAcceptClose.addEventListener("click",function(){formAccept.style.display="none",document.documentElement.style.overflowY="auto"}),history.replaceState(null,"",window.location.pathname)),document.getElementById("header").style.marginTop="".concat(document.querySelector(".navBox").offsetHeight,"px")}),document.getElementById("skills").getBoundingClientRect().bottom),navAboutme=document.getElementById("aboutme").getBoundingClientRect().bottom,navProjects=document.getElementById("projects").getBoundingClientRect().bottom,navReviews=document.getElementById("reviews").getBoundingClientRect().bottom,navContact=document.getElementById("contact").getBoundingClientRect().bottom;document.addEventListener("scroll",function(){var e=window.scrollY,e=(window.scrollY+window.innerHeight+e)/2;e<navStart?(navElements[0].classList.add("nav__menu-element__active"),navElements[1].classList.remove("nav__menu-element__active")):navStart<e&&e<=navAboutme?(navElements[0].classList.remove("nav__menu-element__active"),navElements[1].classList.add("nav__menu-element__active"),navElements[2].classList.remove("nav__menu-element__active"),sectionTitle[0].classList.add("section_title--active")):navAboutme<e&&e<=navProjects?(navElements[1].classList.remove("nav__menu-element__active"),navElements[2].classList.add("nav__menu-element__active"),navElements[3].classList.remove("nav__menu-element__active"),sectionTitle[1].classList.add("section_title--active")):navProjects<e&&e<=navReviews?(navElements[2].classList.remove("nav__menu-element__active"),navElements[3].classList.add("nav__menu-element__active"),navElements[4].classList.remove("nav__menu-element__active"),sectionTitle[2].classList.add("section_title--active")):navReviews<e&&e<=navContact&&(navElements[3].classList.remove("nav__menu-element__active"),navElements[4].classList.add("nav__menu-element__active"),sectionTitle[3].classList.add("section_title--active"))}),footerDate(),window.addEventListener("click",clickOutsideNav);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYnRuTmF2T3BlbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm5hdiIsImJ0bk5hdkNsb3NlIiwicmV2aWV3c01lbnVBcnJvd3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmV2aWV3c0JveCIsInJld2lld3NNZW51RWxlbWVudHNCb3giLCJmb3JtSW5wdXRzIiwiZm9ybUFsZXJ0cyIsImZvcm1BY2NlcHQiLCJmb3JtQWNjZXB0Q2xvc2UiLCJmYXFFbGVtZW50cyIsInNlY3Rpb25UaXRsZSIsImZhcUJ1dHRvbnMiLCJwcm9qZWN0IiwiYWx0IiwibGluayIsImltZyIsInJldmlldyIsImlkIiwibmFtZSIsInRleHQiLCJvcGVuTmF2IiwiY2xvc2VOYXYiLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwicmlnaHQiLCJjbGlja091dHNpZGVOYXYiLCJ0YXJnZXQiLCJjb250YWlucyIsIm5hdkVsZW1lbnRzIiwiZm9yRWFjaCIsImUiLCJzZXRUaW1lb3V0IiwibmV3QSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJzZXRBdHRyaWJ1dGUiLCJuZXdJbWciLCJuZXdUaXRsZSIsInRleHRDb250ZW50IiwibmV3QnRuX2VsZW1lbnQzIiwiYXBwZW5kQ2hpbGQiLCJuZXdCdG4iLCJuZXdCdG5fZWxlbWVudDEiLCJuZXdCdG5fZWxlbWVudDIiLCJwbiIsImNyZWF0ZU5ld1Byb2plY3QiLCJwcm9qZWN0c0JveCIsImFkZCIsImkiLCJuZXdBcnRpY2xlIiwiY3JlYXRlTmV3UmV2aWV3IiwibmV3TmFtZSIsIm5ld05hbWVCb3giLCJuZXdUZXh0IiwibmV3RWxlbWVudE1lbnUiLCJyZXZpZXdzTWVudSIsInJldmlld0FjdGl2ZSIsInJlbW92ZSIsImxlbmd0aCIsInJldmlld0xlZnQiLCJyZXZpZXdzTWVudUVsZW1lbnRzIiwicmV2aWV3c0xpc3QiLCJhY3RpdmVFbGVtZW50Tm93Iiwicm4iLCJyZXZpZXdSaWdodCIsInNlbGVjdGVkRWxlbWVudCIsIkFycmF5IiwiZm9ybUNoZWNrIiwiaW5wdXQiLCJpbmRleE9mIiwiaW5wdXRUYXJnZXQiLCJpbnB1dElkIiwiZW1haWxSZWdleCIsImZvcm1CdG4iLCJkaXNhYmxlZCIsImJ0bk51bWJlciIsInllYXIiLCJzY3JvbGxJbnRvVmlldyIsImdldEZ1bGxZZWFyIiwiZm9vdGVyIiwiZm9ybVRleHRhcmVhIiwidmFsdWUiLCJhdXRvUmVzaXplIiwiaGVpZ2h0IiwidXJsUGFyYW1zIiwic3RhdHVzIiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsUG9zaXRpb24iLCJzY3JvbGxZIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsImdldEVsZW1lbnRCeUlkIiwibmF2Q29udGFjdCIsImJ0biIsInNjcm9sbE5vd01pZGRsZSIsImZvb3RlckRhdGUiLCJvcGVuRkFRIiwiRGF0ZSIsIm5hdlN0YXJ0Iiwic2Nyb2xsSGVpZ2h0IiwidGhpcyIsIlVSTFNlYXJjaFBhcmFtcyIsImxvY2F0aW9uIiwic2VhcmNoIiwiZ2V0IiwiZGlzcGxheSIsIm92ZXJmbG93WSIsInRvcCIsImNvbmNhdCIsInBhdGhuYW1lIiwibWFyZ2luVG9wIiwib2Zmc2V0SGVpZ2h0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYm90dG9tIiwibmF2QWJvdXRtZSIsIm5hdlByb2plY3RzIiwibmF2UmV2aWV3cyIsInNjcm9sbE5vd1RvcCIsImlubmVySGVpZ2h0Il0sIm1hcHBpbmdzIjoiQUFpSUEsSUFqSUEsSUFBQUEsV0FBQUMsU0FBQUMsY0FBQSxvQkFBQSxFQUdNQyxJQUFNRixTQUFTQyxjQUFjLE1BQU0sRUFEbkNGLFlBQWFDLFNBQVNDLGlCQUFjLG9CQUFxQixFQUN6REMsWUFBZUQsU0FBQUEsY0FBcUIsMkJBQUEsRUFFcENFLFlBQWNILFNBQVNDLGNBQWMsZ0JBQUEsRUFJckNHLGtCQUFvQkosU0FBU0ssaUJBQWlCLHFCQUFzQixFQUNwRUMsV0FBYU4sU0FBU0MsY0FBYyxh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QVVhLElBQUksMkJBQTJCLEVBRXhEdkMsYUFBYSxHQUFHMEIsVUFBVWEsSUFBSSx1QkFBdUIsRUFFekQsQ0FBQyxFQUVEZ0QsV0FBVyxFQUNYekUsT0FBT0YsaUJBQWlCLFFBQVNLLGVBQWUiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB6bWllbm5lIGNvbnN0XHJcblxyXG5jb25zdCBidG5OYXZPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZNb2JpbGVfX2J1dHRvblwiKTtcclxuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZcIik7XHJcbmNvbnN0IG5hdkVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX21lbnUtZWxlbWVudFwiKTtcclxuY29uc3QgYnRuTmF2Q2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdk1vYmlsZV9fYnV0dG9uX19jbG9zZVwiKTtcclxuXHJcbmNvbnN0IHByb2plY3RzQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c19fYm94XCIpO1xyXG5cclxuY29uc3QgcmV2aWV3c01lbnVBcnJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmlld3NNZW51X19hcnJvd1wiKTtcclxuY29uc3QgcmV2aWV3c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2aWV3c0JveFwiKTtcclxuY29uc3QgcmV3aWV3c01lbnVFbGVtZW50c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2aWV3c01lbnVfX2VsZW1lbnRzXCIpO1xyXG5cclxuY29uc3QgZm9ybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFjdC1mb3JtX19idXR0b25cIilbMF07XHJcbmNvbnN0IGZvcm1JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhY3QtZm9ybV9faW5wdXRcIik7XHJcbmNvbnN0IGZvcm1BbGVydHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhY3QtZm9ybV9fYWxlcnRcIik7XHJcbmNvbnN0IGZvcm1BY2NlcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3QtaW5mb0JveFwiKTtcclxuY29uc3QgZm9ybUFjY2VwdENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWN0LWluZm9fX2Nsb3NlXCIpO1xyXG5cclxuY29uc3QgZmFxRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZhcS1lbGVtZW50XCIpO1xyXG5jb25zdCBmYXFCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mYXEtZWxlbWVudC1ib3hcIik7XHJcblxyXG5jb25zdCBzZWN0aW9uVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlY3Rpb25fdGl0bGVcIik7XHJcblxyXG4vLyB0YWJsaWNlXHJcblxyXG5jb25zdCBwcm9qZWN0ID0ge1xyXG4gIGlkOiBbXCIwXCIsIFwiMVwiXSxcclxuICBuYW1lOiBbXCJLYW1pZW5pYXJzdHdvXCIsIFwiV2V0ZXJ5bmFyaWFcIl0sXHJcbiAgaW1nOiBbXCJkaXN0L2ltZy9wYWdlMS5wbmdcIiwgXCJkaXN0L2ltZy9wYWdlMi5wbmdcIl0sXHJcbiAgYWx0OiBbXCJrYW1pZW5pYXJzdHdvIEphY2VrIFNweWNoYWxza2lcIiwgXCJnYWJpbmV0IHdldGVyeW5hcnlqbnkgcGlvbmF2ZXRcIl0sXHJcbiAgbGluazogW1wiaHR0cHM6Ly9rYW1pZW5pYXJzdHdvc3B5Y2hhbHNraS5wbC9cIiwgXCJodHRwczovL3Bpb25hdmV0LnBsL1wiXSxcclxufTtcclxuXHJcbmNvbnN0IHJldmlldyA9IHtcclxuICBpZDogW1wiMFwiLCBcIjFcIiwgXCIzXCIsIFwiNFwiXSxcclxuICBuYW1lOiBbXCJCYXNpYVwiLCBcIkFkYW1cIiwgXCJLYXNpYVwiLCBcIk9sZWtcIl0sXHJcbiAgdGV4dDogW1xyXG4gICAgXCJTdXBlciFcIixcclxuICAgIFwiUG9sZWNhbSFcIixcclxuICAgIFwiUHJ6eWvFgmFkb3dhIG9waW5pYSBucjMsIHBvbGVjYW0gc2VyZGVjem5pZVwiLFxyXG4gICAgXCJQcnp5a8WCYWRvd2Egb3BpbmlhIG5yNCwgcG9sZWNhbSBzZXJkZWN6bmllLiBCYXJkem8gbGFkbmUgc3Ryb255XCIsXHJcbiAgXSxcclxufTtcclxuXHJcbi8vIG5hd2lnYWNqYVxyXG5cclxuY29uc3Qgb3Blbk5hdiA9ICgpID0+IHtcclxuICBuYXYuc3R5bGUucmlnaHQgPSAwO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VOYXYgPSAoKSA9PiB7XHJcbiAgbmF2LnN0eWxlLnJpZ2h0ID0gXCItMjAwcHhcIjtcclxufTtcclxuXHJcbmJ0bk5hdk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5OYXYpO1xyXG5idG5OYXZDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VOYXYpO1xyXG5cclxubmF2RWxlbWVudHMuZm9yRWFjaCgoZSkgPT4ge1xyXG4gIGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2xvc2VOYXYoKTtcclxuICAgICAgfSwgMzAwKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBjbGlja091dHNpZGVOYXYgPSAoZSkgPT4ge1xyXG4gIGlmIChcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm5hdl9fbWVudS1lbGVtZW50XCIpIHx8XHJcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXZNb2JpbGVfX2J1dHRvbl9fY2xvc2VcIikgfHxcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm5hdlwiKSB8fFxyXG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibmF2TW9iaWxlX19idXR0b25cIikgfHxcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm5hdk1vYmlsZV9fYnV0dG9uX19jbG9zZS1lbGVtZW50XCIpIHx8XHJcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXZNb2JpbGVfX2J1dHRvbi1lbGVtZW50XCIpXHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcclxuICAgICAgY2xvc2VOYXYoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vLyBwcm9qZWt0eVxyXG5cclxuY29uc3QgY3JlYXRlTmV3UHJvamVjdCA9IChwbikgPT4ge1xyXG4gIGNvbnN0IG5ld0EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBuZXdBLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xyXG4gIG5ld0Euc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBwcm9qZWN0LmxpbmtbcG5dKTtcclxuICBuZXdBLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcclxuXHJcbiAgY29uc3QgbmV3SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBuZXdJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHByb2plY3QuaW1nW3BuXSk7XHJcbiAgbmV3SW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBwcm9qZWN0LmFsdFtwbl0pO1xyXG4gIG5ld0ltZy5jbGFzc0xpc3QuYWRkKFwicHJvamVjdF9faW1nXCIpO1xyXG5cclxuICBjb25zdCBuZXdUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIG5ld1RpdGxlLnRleHRDb250ZW50ID0gcHJvamVjdC5uYW1lW3BuXTtcclxuICBuZXdUaXRsZS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdF9fdGl0bGVcIik7XHJcblxyXG4gIGNvbnN0IG5ld0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgbmV3QnRuLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0X19idG5cIik7XHJcblxyXG4gIGNvbnN0IG5ld0J0bl9lbGVtZW50MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xyXG4gIG5ld0J0bl9lbGVtZW50MS5jbGFzc0xpc3QuYWRkKFwiZmEtc29saWRcIik7XHJcbiAgbmV3QnRuX2VsZW1lbnQxLmNsYXNzTGlzdC5hZGQoXCJmYS1hcnJvdy1yaWdodFwiKTtcclxuICBuZXdCdG5fZWxlbWVudDEuY2xhc3NMaXN0LmFkZChcInByb2plY3RfX2J0bi1hcnJvd1wiKTtcclxuXHJcbiAgY29uc3QgbmV3QnRuX2VsZW1lbnQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBuZXdCdG5fZWxlbWVudDIuY2xhc3NMaXN0LmFkZChcInRyaWFuZ2xlX19wcm9qZWN0LWJ0blwiKTtcclxuXHJcbiAgY29uc3QgbmV3QnRuX2VsZW1lbnQzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBuZXdCdG5fZWxlbWVudDMuY2xhc3NMaXN0LmFkZChcInRyaWFuZ2xlX19wcm9qZWN0LWJ0bl9fMlwiKTtcclxuXHJcbiAgbmV3QnRuLmFwcGVuZENoaWxkKG5ld0J0bl9lbGVtZW50MSk7XHJcbiAgbmV3QnRuLmFwcGVuZENoaWxkKG5ld0J0bl9lbGVtZW50Mik7XHJcbiAgbmV3QnRuLmFwcGVuZENoaWxkKG5ld0J0bl9lbGVtZW50Myk7XHJcblxyXG4gIG5ld0EuYXBwZW5kQ2hpbGQobmV3SW1nKTtcclxuICBuZXdBLmFwcGVuZENoaWxkKG5ld1RpdGxlKTtcclxuICBuZXdBLmFwcGVuZENoaWxkKG5ld0J0bik7XHJcblxyXG4gIHByb2plY3RzQm94LmFwcGVuZENoaWxkKG5ld0EpO1xyXG59O1xyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0LmlkLmxlbmd0aDsgaSsrKSB7XHJcbiAgY3JlYXRlTmV3UHJvamVjdChpKTtcclxufVxyXG5cclxuLy8gb3BpbmllXHJcblxyXG5jb25zdCBjcmVhdGVOZXdSZXZpZXcgPSAocm4pID0+IHtcclxuICBjb25zdCBuZXdBcnRpY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFydGljbGVcIik7XHJcbiAgbmV3QXJ0aWNsZS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3XCIpO1xyXG5cclxuICBjb25zdCBuZXdOYW1lQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBuZXdOYW1lQm94LmNsYXNzTGlzdC5hZGQoXCJyZXZpZXdfX25hbWUtYm94XCIpO1xyXG5cclxuICBjb25zdCBuZXdOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgbmV3TmFtZS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3X19uYW1lXCIpO1xyXG4gIG5ld05hbWUudGV4dENvbnRlbnQgPSByZXZpZXcubmFtZVtybl07XHJcblxyXG4gIGNvbnN0IG5ld1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIG5ld1RleHQuY2xhc3NMaXN0LmFkZChcInJldmlld19fdGV4dFwiKTtcclxuICBuZXdUZXh0LnRleHRDb250ZW50ID0gcmV2aWV3LnRleHRbcm5dO1xyXG5cclxuICBjb25zdCBuZXdFbGVtZW50TWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgbmV3RWxlbWVudE1lbnUuY2xhc3NMaXN0LmFkZChcInJldmlld3NNZW51X19lbGVtZW50XCIpO1xyXG5cclxuICBuZXdOYW1lQm94LmFwcGVuZENoaWxkKG5ld05hbWUpO1xyXG5cclxuICBuZXdBcnRpY2xlLmFwcGVuZENoaWxkKG5ld05hbWVCb3gpO1xyXG4gIG5ld0FydGljbGUuYXBwZW5kQ2hpbGQobmV3VGV4dCk7XHJcblxyXG4gIHJldmlld3NCb3guYXBwZW5kQ2hpbGQobmV3QXJ0aWNsZSk7XHJcblxyXG4gIHJld2lld3NNZW51RWxlbWVudHNCb3guYXBwZW5kQ2hpbGQobmV3RWxlbWVudE1lbnUpO1xyXG59O1xyXG5cclxuY29uc3QgcmV2aWV3c01lbnUgPSAoZSkgPT4ge1xyXG4gIGxldCBhY3RpdmVFbGVtZW50Tm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgIFwiLnJldmlld3NNZW51X19lbGVtZW50LS1hY3RpdmVcIlxyXG4gICkubGVuZ3RoO1xyXG4gIGxldCByZXZpZXdBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmlldy0tYWN0aXZlXCIpO1xyXG4gIGxldCByZXZpZXdMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZpZXctLWxlZnRcIik7XHJcbiAgbGV0IHJldmlld1JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZpZXctLXJpZ2h0XCIpO1xyXG5cclxuICByZXZpZXdBY3RpdmUuY2xhc3NMaXN0LnJlbW92ZShcInJldmlldy0tYWN0aXZlXCIpO1xyXG4gIHJldmlld0xlZnQuY2xhc3NMaXN0LnJlbW92ZShcInJldmlldy0tbGVmdFwiKTtcclxuICByZXZpZXdSaWdodC5jbGFzc0xpc3QucmVtb3ZlKFwicmV2aWV3LS1yaWdodFwiKTtcclxuXHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInJldmlld3NNZW51X19hcnJvd1wiKSkge1xyXG4gICAgaWYgKEFycmF5LmZyb20ocmV2aWV3c01lbnVBcnJvd3MpLmluZGV4T2YoZS50YXJnZXQpID09IDApIHtcclxuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnROb3cgPT0gMSkge1xyXG4gICAgICAgIHJldmlld3NNZW51RWxlbWVudHMuZm9yRWFjaCgoZSkgPT4ge1xyXG4gICAgICAgICAgZS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3c01lbnVfX2VsZW1lbnQtLWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXZpZXdzTGlzdFtyZXZpZXdzTGlzdC5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1hY3RpdmVcIik7XHJcbiAgICAgICAgcmV2aWV3c0xpc3RbMF0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tcmlnaHRcIik7XHJcbiAgICAgICAgcmV2aWV3c0xpc3RbcmV2aWV3c0xpc3QubGVuZ3RoIC0gMl0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tbGVmdFwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXZpZXdzTWVudUVsZW1lbnRzW2FjdGl2ZUVsZW1lbnROb3cgLSAxXS5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICAgICAgXCJyZXZpZXdzTWVudV9fZWxlbWVudC0tYWN0aXZlXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldmlld3NMaXN0W2FjdGl2ZUVsZW1lbnROb3cgLSAyXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1hY3RpdmVcIik7XHJcbiAgICAgICAgcmV2aWV3c0xpc3RbYWN0aXZlRWxlbWVudE5vdyAtIDFdLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXctLXJpZ2h0XCIpO1xyXG4gICAgICAgIGlmIChhY3RpdmVFbGVtZW50Tm93ID09IDIpIHtcclxuICAgICAgICAgIHJldmlld3NMaXN0W3Jldmlld3NMaXN0Lmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXctLWxlZnRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldmlld3NMaXN0W2FjdGl2ZUVsZW1lbnROb3cgLSAzXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1sZWZ0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnROb3cgPT0gcmV2aWV3c01lbnVFbGVtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICByZXZpZXdzTWVudUVsZW1lbnRzLmZvckVhY2goKGUpID0+IHtcclxuICAgICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZShcInJldmlld3NNZW51X19lbGVtZW50LS1hY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldmlld3NNZW51RWxlbWVudHNbMF0uY2xhc3NMaXN0LmFkZChcInJldmlld3NNZW51X19lbGVtZW50LS1hY3RpdmVcIik7XHJcbiAgICAgICAgcmV2aWV3c0xpc3RbMF0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tYWN0aXZlXCIpO1xyXG4gICAgICAgIHJldmlld3NMaXN0W3Jldmlld3NMaXN0Lmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXctLWxlZnRcIik7XHJcbiAgICAgICAgcmV2aWV3c0xpc3RbMV0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tcmlnaHRcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV2aWV3c01lbnVFbGVtZW50c1thY3RpdmVFbGVtZW50Tm93XS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgXCJyZXZpZXdzTWVudV9fZWxlbWVudC0tYWN0aXZlXCJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXZpZXdzTGlzdFthY3RpdmVFbGVtZW50Tm93XS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1hY3RpdmVcIik7XHJcbiAgICAgICAgcmV2aWV3c0xpc3RbYWN0aXZlRWxlbWVudE5vdyAtIDFdLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXctLWxlZnRcIik7XHJcblxyXG4gICAgICAgIGlmIChhY3RpdmVFbGVtZW50Tm93ID09IHJldmlld3NNZW51RWxlbWVudHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgcmV2aWV3c0xpc3RbMF0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tcmlnaHRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldmlld3NMaXN0W2FjdGl2ZUVsZW1lbnROb3cgKyAxXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1yaWdodFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50ID0gQXJyYXkuZnJvbShyZXZpZXdzTWVudUVsZW1lbnRzKS5pbmRleE9mKGUudGFyZ2V0KTtcclxuXHJcbiAgICBpZiAoYWN0aXZlRWxlbWVudE5vdyAtIDEgPCBzZWxlY3RlZEVsZW1lbnQpIHtcclxuICAgICAgLy8gd2nEmWtzemVcclxuICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZUVsZW1lbnROb3c7IGkgPD0gc2VsZWN0ZWRFbGVtZW50OyBpKyspIHtcclxuICAgICAgICByZXZpZXdzTWVudUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXdzTWVudV9fZWxlbWVudC0tYWN0aXZlXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldmlld3NMaXN0W3NlbGVjdGVkRWxlbWVudF0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tYWN0aXZlXCIpO1xyXG4gICAgICByZXZpZXdzTGlzdFtzZWxlY3RlZEVsZW1lbnQgLSAxXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1sZWZ0XCIpO1xyXG5cclxuICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudCA9PSByZXZpZXdzTGlzdC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgcmV2aWV3c0xpc3RbMF0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tcmlnaHRcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV2aWV3c0xpc3Rbc2VsZWN0ZWRFbGVtZW50ICsgMV0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tcmlnaHRcIik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoYWN0aXZlRWxlbWVudE5vdyAtIDEgPiBzZWxlY3RlZEVsZW1lbnQpIHtcclxuICAgICAgLy8gbW5pZWpzemVcclxuICAgICAgZm9yIChsZXQgaSA9IHNlbGVjdGVkRWxlbWVudCArIDE7IGkgPCBhY3RpdmVFbGVtZW50Tm93OyBpKyspIHtcclxuICAgICAgICByZXZpZXdzTWVudUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJyZXZpZXdzTWVudV9fZWxlbWVudC0tYWN0aXZlXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXZpZXdzTGlzdFtzZWxlY3RlZEVsZW1lbnRdLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXctLWFjdGl2ZVwiKTtcclxuICAgICAgcmV2aWV3c0xpc3Rbc2VsZWN0ZWRFbGVtZW50ICsgMV0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tcmlnaHRcIik7XHJcblxyXG4gICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50ID09IDApIHtcclxuICAgICAgICByZXZpZXdzTGlzdFtyZXZpZXdzTGlzdC5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1sZWZ0XCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldmlld3NMaXN0W3NlbGVjdGVkRWxlbWVudCAtIDFdLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXctLWxlZnRcIik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldmlld0FjdGl2ZS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1hY3RpdmVcIik7XHJcbiAgICAgIHJldmlld0xlZnQuY2xhc3NMaXN0LmFkZChcInJldmlldy0tbGVmdFwiKTtcclxuICAgICAgcmV2aWV3UmlnaHQuY2xhc3NMaXN0LmFkZChcInJldmlldy0tcmlnaHRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCByZXZpZXcuaWQubGVuZ3RoOyBpKyspIHtcclxuICBjcmVhdGVOZXdSZXZpZXcoaSk7XHJcbn1cclxuXHJcbmNvbnN0IHJldmlld3NNZW51RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmlld3NNZW51X19lbGVtZW50XCIpO1xyXG5jb25zdCByZXZpZXdzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmV2aWV3XCIpO1xyXG5cclxucmV2aWV3c0xpc3RbMF0uY2xhc3NMaXN0LmFkZChcInJldmlldy0tYWN0aXZlXCIpO1xyXG5yZXZpZXdzTWVudUVsZW1lbnRzWzBdLmNsYXNzTGlzdC5hZGQoXCJyZXZpZXdzTWVudV9fZWxlbWVudC0tYWN0aXZlXCIpO1xyXG5yZXZpZXdzTGlzdFtyZXZpZXdzTGlzdC5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1sZWZ0XCIpO1xyXG5yZXZpZXdzTGlzdFsxXS5jbGFzc0xpc3QuYWRkKFwicmV2aWV3LS1yaWdodFwiKTtcclxuXHJcbnJldmlld3NNZW51QXJyb3dzLmZvckVhY2goKGUpID0+IHtcclxuICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZXZpZXdzTWVudSk7XHJcbn0pO1xyXG5cclxucmV2aWV3c01lbnVFbGVtZW50cy5mb3JFYWNoKChlKSA9PiB7XHJcbiAgZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmV2aWV3c01lbnUpO1xyXG59KTtcclxuXHJcbi8vIHNwcmF3ZHphbmllIGZvcm11bGFyelxyXG5cclxuY29uc3QgZm9ybUNoZWNrID0gKGlucHV0KSA9PiB7XHJcbiAgY29uc3QgaW5wdXRJZCA9IEFycmF5LmZyb20oZm9ybUlucHV0cykuaW5kZXhPZihpbnB1dC50YXJnZXQpO1xyXG4gIGNvbnN0IGlucHV0VGFyZ2V0ID0gaW5wdXQudGFyZ2V0O1xyXG5cclxuICBpbnB1dC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHtcclxuICAgIGlmIChpbnB1dFRhcmdldC52YWx1ZSA9PSBcIlwiKSB7XHJcbiAgICAgIGZvcm1BbGVydHNbaW5wdXRJZF0udGV4dENvbnRlbnQgPSBcIlBvbGUgbmllIG1vxbxlIGJ5xIcgcHVzdGVcIjtcclxuICAgICAgaW5wdXRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImNvbnRhY3QtZm9ybV9faW5wdXQtLWVycm9yXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9ybUFsZXJ0c1tpbnB1dElkXS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgIGlucHV0VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWN0LWZvcm1fX2lucHV0LS1lcnJvclwiKTtcclxuXHJcbiAgICAgIGlmIChpbnB1dElkID09IDEpIHtcclxuICAgICAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XHJcblxyXG4gICAgICAgIGlmIChlbWFpbFJlZ2V4LnRlc3QoaW5wdXRUYXJnZXQudmFsdWUpKSB7XHJcbiAgICAgICAgICBpbnB1dFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFjdC1mb3JtX19pbnB1dC0tZXJyb3JcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZvcm1BbGVydHNbaW5wdXRJZF0udGV4dENvbnRlbnQgPSBcIldwaXN6IHBvcHJhd255IGFkcmVzIGVtYWlsXCI7XHJcbiAgICAgICAgICBpbnB1dFRhcmdldC5jbGFzc0xpc3QuYWRkKFwiY29udGFjdC1mb3JtX19pbnB1dC0tZXJyb3JcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICBmb3JtSW5wdXRzWzBdLnZhbHVlID09IFwiXCIgfHxcclxuICAgICAgZm9ybUlucHV0c1sxXS52YWx1ZSA9PSBcIlwiIHx8XHJcbiAgICAgIGZvcm1JbnB1dHNbMV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGFjdC1mb3JtX19pbnB1dC0tZXJyb3JcIilcclxuICAgICkge1xyXG4gICAgICBmb3JtQnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvcm1CdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbmZvcm1JbnB1dHMuZm9yRWFjaCgoZSkgPT4ge1xyXG4gIGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZvcm1DaGVjayk7XHJcbn0pO1xyXG5cclxuLy8gRkFRXHJcblxyXG5jb25zdCBvcGVuRkFRID0gKGJ0bikgPT4ge1xyXG4gIGJ0bk51bWJlciA9IEFycmF5LmZyb20oZmFxQnV0dG9ucykuaW5kZXhPZihidG4udGFyZ2V0KTtcclxuXHJcbiAgaWYgKGZhcUVsZW1lbnRzW2J0bk51bWJlcl0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZmFxLWVsZW1lbnQtLWFjdGl2ZVwiKSkge1xyXG4gICAgZmFxRWxlbWVudHNbYnRuTnVtYmVyXS5jbGFzc0xpc3QucmVtb3ZlKFwiZmFxLWVsZW1lbnQtLWFjdGl2ZVwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZmFxRWxlbWVudHMuZm9yRWFjaCgoZSkgPT4ge1xyXG4gICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoXCJmYXEtZWxlbWVudC0tYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZmFxRWxlbWVudHNbYnRuTnVtYmVyXS5jbGFzc0xpc3QuYWRkKFwiZmFxLWVsZW1lbnQtLWFjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgZmFxRWxlbWVudHNbYnRuTnVtYmVyXS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxyXG4gICAgICBibG9jazogXCJuZWFyZXN0XCIsXHJcbiAgICB9KTtcclxuICB9LCAzMDApO1xyXG59O1xyXG5cclxuZmFxRWxlbWVudHMuZm9yRWFjaCgoZSkgPT4ge1xyXG4gIGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5GQVEpO1xyXG59KTtcclxuXHJcbi8vIHN0w7Nwa2EgZGF0YVxyXG5cclxuY29uc3QgZm9vdGVyRGF0ZSA9ICgpID0+IHtcclxuICBjb25zdCBmb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fZGF0YVwiKTtcclxuXHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgZm9vdGVyLnRleHRDb250ZW50ID0geWVhcjtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBmb3JtVGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3QtZm9ybV9fbWVzc2FnZVwiKTtcclxuICBpZiAoZm9ybVRleHRhcmVhKSB7XHJcbiAgICBmdW5jdGlvbiBhdXRvUmVzaXplKCkge1xyXG4gICAgICB0aGlzLnN0eWxlLmhlaWdodCA9IFwiODBweFwiO1xyXG4gICAgICB0aGlzLnN0eWxlLmhlaWdodCA9IHRoaXMuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgfVxyXG4gICAgZm9ybVRleHRhcmVhLnN0eWxlLmhlaWdodCA9IFwiODBweFwiO1xyXG4gICAgZm9ybVRleHRhcmVhLnN0eWxlLmhlaWdodCA9IGZvcm1UZXh0YXJlYS5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XHJcbiAgICBmb3JtVGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGF1dG9SZXNpemUsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgY29uc3Qgc3RhdHVzID0gdXJsUGFyYW1zLmdldChcInN0YXR1c1wiKTtcclxuXHJcbiAgaWYgKHN0YXR1cyA9PSBcInN1a2Nlc1wiKSB7XHJcbiAgICBmb3JtQWNjZXB0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9IFwiaGlkZGVuXCI7XHJcblxyXG4gICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGZvcm1BY2NlcHQuc3R5bGUudG9wID0gYCR7c2Nyb2xsUG9zaXRpb259cHhgO1xyXG5cclxuICAgIGZvcm1BY2NlcHRDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBmb3JtQWNjZXB0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9IFwiYXV0b1wiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgXCJcIiwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyXCIpLnN0eWxlLm1hcmdpblRvcCA9IGAke1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZCb3hcIikub2Zmc2V0SGVpZ2h0XHJcbiAgfXB4YDtcclxufSk7XHJcblxyXG4vLyBuYXdpZ2FjamEgZGFsZWpcclxuXHJcbmNvbnN0IG5hdlN0YXJ0ID0gZG9jdW1lbnRcclxuICAuZ2V0RWxlbWVudEJ5SWQoXCJza2lsbHNcIilcclxuICAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xyXG5jb25zdCBuYXZBYm91dG1lID0gZG9jdW1lbnRcclxuICAuZ2V0RWxlbWVudEJ5SWQoXCJhYm91dG1lXCIpXHJcbiAgLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuY29uc3QgbmF2UHJvamVjdHMgPSBkb2N1bWVudFxyXG4gIC5nZXRFbGVtZW50QnlJZChcInByb2plY3RzXCIpXHJcbiAgLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuY29uc3QgbmF2UmV2aWV3cyA9IGRvY3VtZW50XHJcbiAgLmdldEVsZW1lbnRCeUlkKFwicmV2aWV3c1wiKVxyXG4gIC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207XHJcbmNvbnN0IG5hdkNvbnRhY3QgPSBkb2N1bWVudFxyXG4gIC5nZXRFbGVtZW50QnlJZChcImNvbnRhY3RcIilcclxuICAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgbGV0IHNjcm9sbE5vd1RvcCA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gIGxldCBzY3JvbGxOb3dCb3R0b20gPSB3aW5kb3cuc2Nyb2xsWSArIHdpbmRvdy5pbm5lckhlaWdodDtcclxuICBsZXQgc2Nyb2xsTm93TWlkZGxlID0gKHNjcm9sbE5vd0JvdHRvbSArIHNjcm9sbE5vd1RvcCkgLyAyO1xyXG5cclxuICBpZiAoc2Nyb2xsTm93TWlkZGxlIDwgbmF2U3RhcnQpIHtcclxuICAgIG5hdkVsZW1lbnRzWzBdLmNsYXNzTGlzdC5hZGQoXCJuYXZfX21lbnUtZWxlbWVudF9fYWN0aXZlXCIpO1xyXG4gICAgbmF2RWxlbWVudHNbMV0uY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fbWVudS1lbGVtZW50X19hY3RpdmVcIik7XHJcbiAgfSBlbHNlIGlmIChzY3JvbGxOb3dNaWRkbGUgPiBuYXZTdGFydCAmJiBzY3JvbGxOb3dNaWRkbGUgPD0gbmF2QWJvdXRtZSkge1xyXG4gICAgbmF2RWxlbWVudHNbMF0uY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fbWVudS1lbGVtZW50X19hY3RpdmVcIik7XHJcbiAgICBuYXZFbGVtZW50c1sxXS5jbGFzc0xpc3QuYWRkKFwibmF2X19tZW51LWVsZW1lbnRfX2FjdGl2ZVwiKTtcclxuICAgIG5hdkVsZW1lbnRzWzJdLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX21lbnUtZWxlbWVudF9fYWN0aXZlXCIpO1xyXG5cclxuICAgIHNlY3Rpb25UaXRsZVswXS5jbGFzc0xpc3QuYWRkKFwic2VjdGlvbl90aXRsZS0tYWN0aXZlXCIpO1xyXG4gIH0gZWxzZSBpZiAoc2Nyb2xsTm93TWlkZGxlID4gbmF2QWJvdXRtZSAmJiBzY3JvbGxOb3dNaWRkbGUgPD0gbmF2UHJvamVjdHMpIHtcclxuICAgIG5hdkVsZW1lbnRzWzFdLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX21lbnUtZWxlbWVudF9fYWN0aXZlXCIpO1xyXG4gICAgbmF2RWxlbWVudHNbMl0uY2xhc3NMaXN0LmFkZChcIm5hdl9fbWVudS1lbGVtZW50X19hY3RpdmVcIik7XHJcbiAgICBuYXZFbGVtZW50c1szXS5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19tZW51LWVsZW1lbnRfX2FjdGl2ZVwiKTtcclxuXHJcbiAgICBzZWN0aW9uVGl0bGVbMV0uY2xhc3NMaXN0LmFkZChcInNlY3Rpb25fdGl0bGUtLWFjdGl2ZVwiKTtcclxuICB9IGVsc2UgaWYgKHNjcm9sbE5vd01pZGRsZSA+IG5hdlByb2plY3RzICYmIHNjcm9sbE5vd01pZGRsZSA8PSBuYXZSZXZpZXdzKSB7XHJcbiAgICBuYXZFbGVtZW50c1syXS5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19tZW51LWVsZW1lbnRfX2FjdGl2ZVwiKTtcclxuICAgIG5hdkVsZW1lbnRzWzNdLmNsYXNzTGlzdC5hZGQoXCJuYXZfX21lbnUtZWxlbWVudF9fYWN0aXZlXCIpO1xyXG4gICAgbmF2RWxlbWVudHNbNF0uY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fbWVudS1lbGVtZW50X19hY3RpdmVcIik7XHJcblxyXG4gICAgc2VjdGlvblRpdGxlWzJdLmNsYXNzTGlzdC5hZGQoXCJzZWN0aW9uX3RpdGxlLS1hY3RpdmVcIik7XHJcbiAgfSBlbHNlIGlmIChzY3JvbGxOb3dNaWRkbGUgPiBuYXZSZXZpZXdzICYmIHNjcm9sbE5vd01pZGRsZSA8PSBuYXZDb250YWN0KSB7XHJcbiAgICBuYXZFbGVtZW50c1szXS5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19tZW51LWVsZW1lbnRfX2FjdGl2ZVwiKTtcclxuICAgIG5hdkVsZW1lbnRzWzRdLmNsYXNzTGlzdC5hZGQoXCJuYXZfX21lbnUtZWxlbWVudF9fYWN0aXZlXCIpO1xyXG5cclxuICAgIHNlY3Rpb25UaXRsZVszXS5jbGFzc0xpc3QuYWRkKFwic2VjdGlvbl90aXRsZS0tYWN0aXZlXCIpO1xyXG4gIH1cclxufSk7XHJcblxyXG5mb290ZXJEYXRlKCk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tPdXRzaWRlTmF2KTtcclxuIl19
